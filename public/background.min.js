let keyPressCount=0,backSpaceCount=0,startTime=null;function isValidKey(e){return e.match(/^[a-z0-9]$/i)}function playSound(e,a){let t=chrome.runtime.getURL("assets/sounds/");const s=(s,c)=>{t+=`${e}/`,t+=" "==a?"space.wav":"Enter"==a?"enter.wav":"Backspace"==a?"backspace.wav":`${((e,a)=>Math.floor(Math.random()*(a-e+1))+e)(s,c)}.wav`};switch(e){case"mechanical_keyboard":case"typewriter":case"numpad":s(0,3);break;case"chess":s(0,2);break;default:e="mechanical_keyboard",s(0,3)}new Audio(t).play()}chrome.runtime.onMessage.addListener(((e,a,t)=>{"keyPress"===e.type&&chrome.storage.local.get(["startClicked","theme"],(function(t){if(t.startClicked){null===startTime&&(startTime=Date.now()),isValidKey(e.key)&&keyPressCount++,"Backspace"==e.key&&backSpaceCount++,chrome.scripting.executeScript({target:{tabId:a.tab.id},function:playSound,args:[t.theme,e.key]});let s=(Date.now()-startTime)/1e3/60;const c=keyPressCount/5/s;chrome.storage.local.set({wpm:Math.round(c)})}}))}));